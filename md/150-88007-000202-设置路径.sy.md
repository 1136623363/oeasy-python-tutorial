---
show: step

version: 1.0
enable_checker: true
---

# 设置路径

## 回忆上次内容

- 可以把 `py`文件 直接执行了
	- 文件头部要声明用的哪个解释器
	- `#!/usr/bin/python3`
- 修改py文件的权限
	- 给当前用户增加 执行`excute` 权限
	- chmod u+x sleep.py
- 运行`./sleep.py`成功
- 但我想要直接`sleep.py`可能吗？🤔

### 进行搜索

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210221-1613894555384)

### 按图索骥

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210221-1613894612126)

```shell
#显示当前路径
echo $PATH
```
- $PATH
	- $ 说明这是一个环境变量
	- `PATH` 说明路径
	- 这里面有很多路径
	- 这些路径下的命令都可以执行
	- 路径之间用`:`分隔开

### 执行路径
```
#ls 命令在哪
whereis ls
#ls 多大
ls /bin/ls -lh
# 从路径执行ls
/bin/ls
```

- 比如这里有 `/bin`
	- 所以`/bin/ls` 就能直接执行
	- 而且不论当前路径在哪
	- 都能直接执行
	- 如果环境变量`$PATH` 中没有`/bin`
	- 就找不到 `ls` 了
	- 就连`ls`也不能执行了
	- 你说环境变量重要不重要？！

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210812-1628738501507)

- 那python3在哪呢？


### 分析路径
- 路径中包含 `python3` 所在的路径
	- `/usr/bin` 
	- 见下图红框
- 为什么无论在什么位置
- 只要输入python3
	- 就能从路径`$PATH`中的`/usr/bin`找到`python3`并执行
	- 是因为这个路径`/usr/bin`在`$PATH`中
	- 系统会在`$PATH`里面找相应的路径
- 那我们把`sleep.py`放到/usr/bin不就能被找到了么？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210221-1613896706330)

### 放入路径

```shell
#把文件拷贝过去
cp sleep.py /usr/bin
#用管理员权限给考过去
sudo 。、cp sleep.py /usr/bin
#尝试执行
sleep.py
#为当前用户增加可执行权限
chmod u+x /usr/bin/sleep.py
#使用管理员权限提权
sudo chmod u+x /usr/bin/sleep.py
#尝试执行
sleep
#尝试用管理员执行
sudo sleep
```

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210221-1613895179987)

- 最后sudo sleep是可以执行的
- 但是还需要打一个sudo
- 好麻烦

### 继续提权

```shell
#使用管理员权限提权
sudo chmod a+x /usr/bin/sleep.py
#尝试执行
sleep
```
- a+x 意思是
	- `a`ll都增加
	- e`x`cute的权限


![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210221-1613895475722)

- 不过什么都放到 `/usr/bin`下面 很不安全
- 我想就在当前用户文件夹~
- 就能执行

```shell
#先把/usr/bin下面的sleep.py删掉
rm /usr/bin/sleep.py
#不让删就用管理员权限删
sudo rm /usr/bin/sleep.py
#确认删除
ls /usr/bin/sleep.py
```

### 修改$PATH

```shell
#查看当前$PATH
echo $PATH
#设置$PATH
export PATH=.:$PATH
#查看更新后的$PATH
echo $PATH
```
- 确认删除之后
- export PATH=~:$PATH
	- .是当前路径
	- :是分隔符号
	- 前面的PATH不需要$
- 修改后主要是增加了~(当前用户路径)
	- 具体可以见红色方框

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210311-1615449310829)

### 成功运行

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210221-1613896287421)

- 这个确实可以了！
- 在当前路径运行`sleep.py`
	- 运行`第1行`声明的解释器
	- 把/usr/bin/python3从硬盘调用到内存
	- 成为一个进程
	- 每隔1描述出一次时间
	- <kbd>ctrl</kbd>+<kbd>c</kbd>结束进程
- 但是重新打开新终端这个就失效了
- 我想一打开就把 `$PATH` 设置好
- 应该怎么办？

### ~/.zshrc

```
# 写入zsh的rc
vi ~/.zshrc
```

- 编辑这个配置文件

```
export PATH="/usr/lib/jvm/java-8-openjdk-amd64/bin:/usr/lib/jvm/java-8-openjdk-amd64/jre:/home/shiyanlou:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/go/bin:/home/shiyanlou/golang/bin:/usr/share/maven/bin:/usr/local/bin:/usr/sbin/nodejs/bin:/usr/sbin/yarn/bin:~"
```

- 完整的写进去
- 以后只要是进zsh
- PATH就会生效

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210311-1615450256346)

- 这个 `~/.zshrc` 到底是啥意思 

### 命令含义
- ~/.zshrc
	- ~ 指的是当前用户文件夹
		- 此环境配置只对当前用户有效
	- . 说明这是个隐藏文件
		- ls 看不见
		- ls -lah 才能看见
	- zsh
		- 说的是shell是zsh
		- 而不是bash
		- bash就得用 ~/.bashrc
	- rc指的是 run command的缩写
		- 运行程序
		- 很多东西在配置shell的时候不用重复手动运行
		- 写到rc里面
		- 启动shell或者软件的时候就可以自动运行了
		- 比如.zshrc .vimrc .bashrc

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210812-1628740962094)


## 总结

- 想要直接执行 `sleep.py`
	- 可以把 `sleep.py` 放入 `/usr/bin/` 下面
	- 可以修改 `$PATH`路径
		- 把当前目录.添加到 `$PATH`
		- 这样 `sleep.py` 不用加路径就可以被找到
		- 于是可以被执行了
- 可以把配置`PATH`的脚本放到`zsh`的配置文件中
	- 设置~/.zshrc就可以配置zsh
- 在当前路径运行sleep.py
	- 运行第1行声明的解释器python3
	- 把/usr/bin/python3从硬盘调用到内存
	- 成为一个进程
	- <kbd>ctrl</kbd>+<kbd>c</kbd>结束进程
- 我想看到 `python3` 这个进程可能吗？🤔
- 我们下次再说！👋