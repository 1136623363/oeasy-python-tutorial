---
show: step
version: 1.0
enable_checker: true
---

# 返回值

## 回忆

- 上次了解了函数返回值
- 函数可以返回字符串
- 也可以返回整型变量
- 甚至可以返回NoneType类型的None
- 啥都不返回
- 其实最终也返回了个None
- 函数必须返回
- 我们能做点好玩的函数么？
- 先看看系统中的各种函数

### 最大值max

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659866549291)

- max函数
- 接收2个整型参数
- 返回一个整型返回值
- 这个函数的源文件在哪里呢？

### builtins

- 查看帮助

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659866716220)

- 通过帮助找到特征

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659866733672)

- 通过特征定位函数定义

### 继续查找

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659866888975)

- 这个函数调用了max_min

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659866914624)

- 最大最小值函数看起来完全相反
- 实现起来确实完全相通的
- 我们不重写这个max了
- 看看builtins中是否有add函数

### 定义函数

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659867138068)

- 确实可以定义一个add函数
- 然后观察add的特性
- 以及调用add时add(2, 3)的特性

### 具体实现

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659867595181)

- 确实可以实现
- 这个add函数
	- 接收有两个参数
	- 返回一个返回值
- 具体是如何实现的呢？

### 执行过程

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659867738274)

- 声明了两个变量a,b
- 并且在内存中分配了相应的空间
- 准备开始函数调用

### 参数赋值
- 调用的时候完成了一个参数赋值的过程
	- 把主程序的全局(global)变量a
	- 赋给函数内的局部(local)变量x
	- 同样的事情

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659867878430)

- 也发生在将b赋给y的过程中

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659868046332)

- 还可以看一下函数堆栈情况

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659868326790)

- 然后就是返回的过程

### 返回 

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659868456154)

- 函数完成加法计算后
- 得到一个新的int型变量的地址
- 作为函数的返回值

- print函数中调用add(a, b)得到结果
- 把最终的int型变量的地址(尾号7024)给到print函数
- print函数打印出这个地址上数字的数值(3000)

### 汇编理解

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659869586849)

- 紫色部分进行函数调用
- 得到返回值3000的地址之后
- 作为参数给到print函数
- print函数调用之后
- 弹栈
- print函数返回值None没有接收变量
- 主程序返回
- 我们去总结一下

### 总结

- 我们这次完成了一个多参数的函数
- 多个参数形成一个参数列表
- 调用时
	- 这些参数会依次序进行参数赋值
	- 进行相加操作
	- 把最终的和作为函数的返回值给到print
	- print完成调用过程
- 注意这次是print函数在调用add函数
- 还可以这样嵌套调用么？🤔
- 我们下次再说👋

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220807-1659869359889)