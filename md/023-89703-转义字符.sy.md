---
show: step
version: 1.0
enable_checker: true
---

# 转义字符

## 回忆上次内容

- 除了`\n`、`\r`之外还有什么特殊的转义序列吗？
  - `\a`是 ␇ (bell),
  - `\b` 退回一格
  - `\t` 水平制表符
  - `\v`、`\f` LineFeed
- 通过 16 进制数值转义
  - `\xhh`
  - 把(`hh`)<sub>`16进制`</sub>对应的`ascii`字符输出
- 通过 8 进制数值转义
  - `\nnn`
  - 把(`nnn`)<sub>`8进制`</sub>对应的`ascii`字符输出
- 转义序列
  - `\n`、`\t`是转义序列
  - `\xhh`也是转义序列
  - `\nnn`还是转义序列
- `\` 反斜杠 backslash 是转义字符
- 如果就想要输出反斜杠`\` 应该怎么办？🤔
- 搜一下呗!

### 搜索结果

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210224-1614168433167)

- 答案就是用两个反斜杠
- `\\`
  - 第一个是转义字符
  - 第二个是转义序列的对应字符
- 这样就可以输出`\`了

### 输出一个反斜杠

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210224-1614168571449)

- 只有一个转义字符，不知道转谁，
- EOL end of line 扫描到结尾也不知道转什么就语法错误了
- 两个反斜杠 在输出的时候就成了一个反斜杠

### 反斜杠

- 为什么方向的斜杠管这个叫反斜杠呢？
- 斜杠是成对儿的
  - slash 斜杠 /
  - backslash 反斜杠 \
- 我们一般的都是右利手
  - 一般从上往下砍都是 右上到左下 slash 很顺手
  - slash 这个词本身就是砍
  - 用鞭子或者锋利的刃来砍
  - 暴力的砍，主要是对于树来说的
  - 顺手的就是 slash
  - 反过来不顺手的就是 backslash
- escape code 转义字符有点逆向思维的感觉
- 要退出原来的字符本身感觉
- 所以是转义用反斜杠
- 所以是\ backslash

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210224-1614171719752)

### 多个`\`

- 如果我要的是多个`\`
- 应该如何呢？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210225-1614252170776)

- 不要收到上图的干扰
  - 这个应该是什么规律？
  - 自己想一下
  - 试一下
- 总结出规律

### 神奇的-反斜杠`\`

- python3 在多行输出的时候
	- 也有特别的应用
- `\`下一行需要连起来一起执行
	- 尝试下面这种东西
	- 在这里反斜杠实现的是续行的效果
	- 此处反斜杠其实就是 `"续行符"`

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220312-1647051056319)

```python
print("\
**************\n\
*            *\n\
*   oeasy    *\n\
*            *\n\
**************")
```

### 原样输出

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210307-1615080706509)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210924-1632460604045)

- 能否输出一些好玩的

### 动物输出

- 总之就是在"""和"""之间的文本
- 原样输出 cowsay 之类的东西
- 我可以试试吗？

### 走起来

```bash
sudo apt install cowsay
echo "oeasy" | cowsay -f turtle > t.py
vi t.py
```

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220313-1647134285172)

- 最后我们用vim打开t.py


![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220313-1647134422388)

- 前后加上三引号和 print 函数

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220313-1647134767034)

### 处理

- 如果直接运行的话
- 输出是有问题的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220313-1647134795614)

- 问题就在于 结尾处的反斜杠
	- 本来这反斜杠是龟壳的一部分
	- 由于在行尾
	- 被理解为了 `"续行符"` 
- 需要明确地写出反斜杠
	- `1` 个 `反斜杠(\)` 是代表着要 `转义`
	- `2` 个 `反斜杠(\\)` 才代表着 `反斜杠这个字符`
- 要把一个反斜杠替换为两个反斜杠
	- 怎么替换呢？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210923-1632398476205)

### 批量替换

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220306-1646568598093)

- `:%s/\\/\\\\/g`
	- `:` 表示进入命令行模式执行命令
	- `%` 表示从第一行到最后一行全范围执行命令
	- `s` 表示 `substitute` 查找替换
	- 查找内容和替换内容用`/`隔开
		- 查找内容是`\\`
			- 反斜杠本身是转义字符
			- 表示反斜杠这个字符需要两个反斜杠
			- `\\` 代表一个反斜杠
		- 替换内容是`\\\\`
			- `\\` 代表一个反斜杠
			- `\\\\` 代表两个反斜杠
	- `g`
		- `g`lobal 行中所有都`查找`
- 替换之后什么效果

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220306-1646568667965)


### 最终效果

```python
print("""
 _______
< oeasy >
 -------
    \\                                  ___-------___
     \\                             _-~~             ~~-_
      \\                         _-~                    /~-_
             /^\\__/^\\         /~  \\                   /    \\
           /|  O|| O|        /      \\_______________/        \\
          | |___||__|      /       /                \\          \\
          |          \\    /      /                    \\          \\
          |   (_______) /______/                        \\_________ \\
          |         / /         \\                      /            \\
           \\         \\^\\\\         \\                  /               \\     /
             \\         ||           \\______________/      _-_       //\\__//
               \\       ||------_-~~-_ ------------- \\ --/~   ~\\    || __/
                 ~-----||====/~     |==================|       |/~~~~~
                  (_(__/  ./     /                    \\_\\      \\.
                         (_(___/                         \\_____)_)
""")
```

- 最终输出如下图所示

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210307-1615081544395)

### 更多转义

- 除了\之外
- " 和 ' 也可以转义

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210224-1614172440096)

- 如果没有转义的话
- 很可能扫描的时候就会报错
- 不知字符串何时结束

## 总结

- 上次讲了\n、\r 之外的转义序列
  - `\a`是 ␇ (bell),
  - `\b` 退回一格
  - `\t` 水平制表符
  - `\v`、`\f` LineFeed
- 通过 16 进制数值转义
  - `\xhh`
  - 把(hh)<sub>16 进制</sub>对应的 ascii 字符输出
- 通过 8 进制数值转义
  - `\nnn`
  - 把(nnn)<sub>8 进制</sub>对应的 ascii 字符输出
- 这次加了 3 个
  - `\\ `输出 `\`
  - `\" `输出 `"`
  - `\' `输出 `'`
- 还有哪个转义字符我们一直没研究？🤔

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210224-1614173286539)

- 这个`\e`是干什么的？
- 我们下次再说！👋
