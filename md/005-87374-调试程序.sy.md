---
show: step
version: 1.0
enable_checker: true
---

# 调试程序 🥊

## 回忆上次内容

- `py` 的程序是按照顺序执行的
  - 是一行行挨排解释执行的
  - 程序并不是数量越多越好

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220705-1656991419814)

- 写的代码越多
	- 出现的bug就越多
  - 什么是bug
  - 如何调试程序呢？


### 尝试调试

- 那 python 程序到底是怎么一步步解释执行的呢？🤔
- 我们可以一步一步运行来调试
- 使用`pdb`来进行调试
  - `pdb`的意思是`p`ython's `d`e`b`ugger🤖

```shell
python3 -m pdb guido.py
#或者使用
pdb3
```

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220112-1641977204091)

- 由于程序不知道哪里出的问题
- 所以一步步来执行
- 一行行执行的目的是去除`bug`，也就是`debug`
- 可是为什么把程序错误叫做 `bug` 🪰 呢？

### 第一个错误 bug

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210220-1613775864374)

- 历史上第一个程序错误是因为电脑里面飞进来一只虫子`bug`🪰 
- 所以后来管调试程序错误叫做 `debug`
- 这个 `bug`🪰  是谁找出来的呢？

### 计算之母

- 找到 `bug` 的第一个调试员或者叫程序员是一位女性
- 和现在程序员大多是男性不同
- 因为当时编程都得检查线路
- 跟编织很像
- 很容易变得一团乱麻
- 需要很细心、有条理的人👩🏼‍🦱

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210811-1628645970342)

- `Grace Murray Hopper`

### 故障

- 当时格蕾丝和她的同事们正艰难地搞清楚
- 他们正在使用的马克 II 电脑出现了什么故障
  - 最后，他们发现一只活蛾被困在控制电路的一个电子开关中

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210916-1631788883985)

- 不要害怕 `bug`，因为 `bug` 是程序员存在的基础
- 如果没有了`bug`，那也就不需要程序员了
- 程序员本身就是 `bug` 一般的存在 🪰
- 让我们来 debug！🐥

### 进行调试

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210924-1632464653576)

- 这里面的n
	- 就是next下一步
- 这里面的list
	- 就是list列表
	- 查看当前程序执行的位置 

### 命令细节

- 运行之后

  - `h` 查询 `help` 帮助
  - `l` 进行 `list` 列表
  - `n` 进行 `next` 向下执行
  - `q` 执行 `quit` 退出

- 这必须动手试一试

### 完成调试

- 一路 `next` 下去
- 程序执行完毕了
- 整个程序就算执行完成了
- python 解释器 就是这么一步步地解释执行的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210924-1632464724387)

- 确实是顺序执行的
- 一行行挨排儿执行的
- 我们就一步步地把bug找出来

### 最真实的解谜游戏

- debug是我见过最真实的解谜游戏了
- 比什么剧本杀好玩多了
- 一步步地分析
- 找不到罪魁祸首的时候

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220722-1658495439185)

- 需要冷静地分析
- 找到罪魁祸首的时候
- 那种快乐太真实了！！！！
- 有的时候为了提高篇效率
- 甚至可以设置断点

### 断点

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220724-1658625941752)

- b n 可以设置断点

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220724-1658625991158)

- c 一路不断执行直到遇到断点

### 应用 

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220724-1658626101800)

- 本来在第一行
- 设置好断点后
- 一路执行
- 一直到第6行

## 总结

- `py` 文件的程序是按照顺序
  - 一行行挨排解释执行的
  - 我们可以 `python3 -m pdb hello.py` 来对程序调试
  - 调试的目的是去除 `bug`
  - 别害怕 `bug`
  - `bug` 会有提示
  - 我们也就知道如何 `debug` 调试
- 顺序执行
	- 程序在文本中从上到下是一行行写的
	- 调试的时候也是从头到尾一行行执行的
	- 但是执行的时候是如何把代码一行行解释执行的呢？
- 说到底 `python3` 到底是个啥呢？🤔
	- `python3` 又是怎么解释 `hello.py` 的？
	- 后面这两这节课相当复杂
	- 如果感觉太过复杂
	- 可以直接跳过
	- 不影响后面的理解
- 我们先要看看python3对Guido.py做了些什么？？？🤔
- 我们下次再说！👋


