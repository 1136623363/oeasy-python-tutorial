---
show: step
version: 1.0
enable_checker: true
---

# 转义序列

## 回忆上次内容

- 我们发现了`5bit-Baudot`博多码的来历
- 从莫尔斯码到博多码
  - 原来人来控制时间间隔，现在机器控制时间间隔
  - 输入方式从电键改成键盘
  - 输出方式从纸带变成打字机
- 除了`\n`和`\r`之外还有什么样的特殊字符吗？🤔

### 搜索 ASCII

- 找到`ascii`的定义
- 还有一些类似于`\n`、`\r`之类的东西

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210224-1614132466771)

### 动手试试

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210224-1614132527364)

### 转义总结

- `\a`是 ␇ (bell),
  - 早期电传打字机快回车之前都会预警的铃铛
  - 也可以手动发送编码敲一下这个铃铛
  - 后来一般都是和主机直接连接的蜂鸣器之类的
  - 现代终端或者服务器可能这个响动
  - 有声卡连接的音响，一般也没有声音
- `\b`
  - BackSpace，退回一格
- `\t`
  - 是水平制表符
  - Horizontal Tab
- `\v`、`\f`
  - 效果就是 LineFeed 的样子
- 为什么只能`\n`
	- 难道`/n`不行么？
	- 动手试试！！

### 实验

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210923-1632393662999)

- 确实不行啊
- `ascii`的定义是源头
- 具体 python 对于这些字符的解释是跟 c 语言学习的
- 这些特殊的东西都和 `\`反斜杠 这个字符相关联
- 为什么呢？

### 反斜杠

- 为什么方向的斜杠管这个叫反斜杠呢？
- 斜杠是成对儿的
  - slash 斜杠 /
  - backslash 反斜杠 \
- 我们一般的都是右利手
  - 一般从上往下砍都是 右上到左下 slash 很顺手
  - slash 这个词本身就是砍
  - 用鞭子或者锋利的刃来砍
  - 暴力的砍，主要是对于树来说的
  - 顺手的就是 slash
  - 反过来不顺手的就是 backslash
- escape code 转义字符有点逆向思维的感觉
	- \自身无法构成一个一个具体的字符
	- 而是要和后面的字符一起
	- 构成一个转义的字符
- 所以转义用的是反斜杠
	- 用的是\ backslash

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210224-1614171719752)

### 转义 Escape

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210224-1614157679393)

- `\`反斜杠(backslash)加了之后就不是原来的字面意思了
	- 转义么
	- 转义转义 
	- 转化含义
- 所以`\`反斜杠这个字符
	- 也叫做转义字符`Escape character`
	- `\b` 这两个字符的序列算是一个转义序列 `Escape sequence`
	- `\` 这个转义字符会让 `\b`转义序列 转义为 `Backspace`
	- `Backspace`退格是这个序列转化含义之后的含义
	- 这个转化后的含义也对应一个ascii字符
	- 就是 `\b`
	- 键盘上的<kbd>退格</kbd>对应的数值就是`8`
- 转义的本质是什么呢?

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210226-1614310192087)

### 转义本质

- 转换含义!!!😡
  - `\n`本来是两个字符
  - 转义字符`\`反斜线
  - 把自己和后面的字符`n`一起
  - 构成了转义序列`\n`
  - 转换含义成为一个新的含义
  - 原来的字符是`\`和`n`
  - 转成新的含义为`换行`
- `\r`就不是`\`和`r`了
	- `\r`是一个整体
	- 对应一个字符
	- 整个对应 ascii 中序号`13`的字符

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220414-1649941727864)

### 试试

- 就像<kbd>a</kbd>对应`65`
	- `\b` 对应 `8`
- `\b`在 python3 的字符串里的作用是实现退格
	- 你发现了 12a 变成 1a 了么？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210923-1632394056849)

- `\b`、`\x08`、`chr(8)`是同一个字符
- 但是这个`\x08`是什么意思？

### 继续转义

- 这个`x08`刚好是退格对应字符的 ascii 值
  - <kbd>退格</kbd>对应的数值就是`8`
  - 但是这个 x 是什么意思？
- 08 是 10 进制还是 16 进制？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210224-1614158000148)

- `x`的意思应该是`hexadecimal`
	- hex就是大着舌头说six
	- 后面`2`位`16`进制数
	- 刚好对应一个字节

### 八进制的转义字符

- 还有一种转义的方法
	- 使用反斜杠直接加 3 位 8 进制数值

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210224-1614158591068)

- 这个 oct 就是八进制的转化函数
	- a 的序号是 97
	- 97 对应的 8 进制是 0o141
	  - 数值是 141
	  - o 代表 oct
- 为什么 o 代表八爪鱼呢？

### 词根来源

- 词根来自于章鱼 🐙 八只脚
	- 章鱼也叫八爪鱼(octopus)
	- 音乐上的八度音阶(octave)
	- 八月原来也来自于这个词根(october)
		- 后来被凯撒中间插了两个月变成了十月

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210813-1628839547836)

- 如果不够三位八进制数呢？

### 八进制字符

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220618-1655541870768/wm)

- 可以观察到0o41对应着字符"!"
- "\041" 和"\41" 都可以表示这个字符
- 那么问题来了
- "\123"究竟
	- 是"\12"+"3"呢
	- 还是"\123"呢

### 查询

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220618-1655543147646/wm)

- 我们就以"\n"为切入点

### 歧义

- 如果直接输出"\131"
	- 结果是Y
	- 0o131对应着0x59
- 但是如果直接输出"\13"
	- 可以输出换行符
- 如果我就想用8进制输出换行符
- 并且后面加一个字符1呢？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220618-1655543318105/wm)

- 两种方法都可以
- 不过第二种去除歧义的能力更强
- 我们需要回忆一下进制

### 进制回忆

- 10 进制
  - 65 直接写
  - int()
- 2 进制
  - 0b1000001
  - 前缀 0b
  - bin()
  - binary
- 16 进制
  - 0x41
  - 前缀 0x
  - hex()
  - hexadecimal
- 8 进制
  - 0o141
  - 前缀 0o
  - oct()
  - octal
- ascii 转化
  - ord("a")
  - chr(65)
  - \x41 `16进制` 表示字符
  - \141 `8进制` 表示字符

### tab 键

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210226-1614310534033)

- 我们试试求出<kbd>tab</kbd>对应的数值
  - 也就是"\t"对应的数值
  - 求出这个数值对应的 2 进制、8 进制、10 进制、16 进制
- 然后尝试用数值的方式输出<kbd>tab</kbd>

## 总结
- 什么是转义？
	- 转义转义转化含义
	- `\` 是转义字符
	- `\n`、`\r`是转义序列
- 除了`\n`、`\r`之外还有什么特殊的转义序列吗？
  - `\a`是 ␇ (bell),
  - `\b` 退回一格
  - `\t` 水平制表符
  - `\v`、`\f` LineFeed
- 通过 16 进制数值转义
  - `\xhh`
  - 把(`hh`)<sub>`16进制`</sub>对应的`ascii`字符输出
- 通过 8 进制数值转义
  - `\nnn`
  - 把(`nnn`)<sub>`8进制`</sub>对应的`ascii`字符输出
- 转义序列
  - `\n`、`\t`是转义序列
  - `\xhh`也是转义序列
  - `\nnn`还是转义序列
- `\` 反斜杠 backslash 是转义字符
- 如果就想要输出反斜杠`\` 应该怎么办？🤔
- 我们下次再说！👋
